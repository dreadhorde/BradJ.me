(function() {
  var AWS, helpers, make;

  helpers = require('../helpers');

  AWS = helpers.AWS;

  make = function(obj, opts) {
    return new AWS.Model.Api(obj, opts);
  };

  describe('AWS.Model.Api', function() {
    describe('loading', function() {
      return it('loads properties from metadata', function() {
        var api;
        api = make({
          metadata: {
            apiVersion: '1.0',
            endpointPrefix: 'endpoint',
            globalEndpoint: 'global',
            signatureVersion: 'v4',
            protocol: 'json',
            timestampFormat: 'rfc822',
            xmlNamespace: 'URI',
            serviceAbbreviation: 'abbr',
            serviceFullName: 'name'
          }
        });
        expect(api.apiVersion).toEqual('1.0');
        expect(api.endpointPrefix).toEqual('endpoint');
        expect(api.globalEndpoint).toEqual('global');
        expect(api.signatureVersion).toEqual('v4');
        expect(api.protocol).toEqual('json');
        expect(api.timestampFormat).toEqual('rfc822');
        expect(api.xmlNamespaceUri).toEqual('URI');
        expect(api.abbreviation).toEqual('abbr');
        return expect(api.fullName).toEqual('name');
      });
    });
    describe('isApi', function() {
      return it('is an API', function() {
        return expect(make().isApi).toBe(true);
      });
    });
    describe('className', function() {
      it('generates the correct class name from fullName', function() {
        var api;
        api = make({
          metadata: {
            serviceFullName: 'Amazon Service Name HeRE'
          }
        });
        return expect(api.className).toEqual('ServiceNameHeRE');
      });
      it('uses abbreviation if supplied', function() {
        var api;
        api = make({
          metadata: {
            serviceAbbreviation: 'Amazon SNH'
          }
        });
        return expect(api.className).toEqual('SNH');
      });
      it('special cases ELB', function() {
        var api;
        api = make({
          metadata: {
            serviceFullName: 'AWS Elastic Load Balancing'
          }
        });
        return expect(api.className).toEqual('ELB');
      });
      return it('handles lack of service name', function() {
        return expect(make().className).toEqual(null);
      });
    });
    describe('documentation', function() {
      it('does not provide documentation by default', function() {
        var api;
        api = make({
          documentation: 'foo'
        });
        return expect(api.documentation).toEqual(null);
      });
      return it('can attach documentation if option is enabled', function() {
        var api;
        api = make({
          documentation: 'foo'
        }, {
          documentation: true
        });
        return expect(api.documentation).toEqual('foo');
      });
    });
    return describe('shapes', function() {
      return it('creates a set of shapes', function() {
        var api;
        api = make({
          shapes: {
            Shape1: {
              type: 'structure',
              members: {
                Member1: {
                  shape: 'MemberShape',
                  timestampFormat: 'rfc822'
                }
              }
            },
            MemberShape: {
              type: 'timestamp',
              timestampFormat: 'iso8601'
            }
          }
        });
        return expect(api.shapes.Shape1.members.Member1.type).toEqual('timestamp');
      });
    });
  });

}).call(this);
